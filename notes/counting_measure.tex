\newcommand\restr[2]{{% we make the whole thing an ordinary symbol
  \left.\kern-\nulldelimiterspace % automatically resize the bar with \right
  #1 % the function
  \vphantom{\big|} % pretend it's a little taller at normal size
  \right|_{#2} % this is the delimiter
  }}
  
 %For any $i,j \in \Delta_+$, define the \emph{multiplicity} $\mu_p^{i,j}$ of the pair $p = (i,j)$ by: 
%\begin{equation}
%	\mu_p^{i,j} = \beta_{p}^{i-1, j} - \beta_{p}^{i, j} + \beta_{p}^{i, j-1}  - \beta_{p}^{i-1, j-1}
%\end{equation}
%The multiplicity function is intimately linked with the persistence diagram. Indeed, the original definition of a persistence 

Both the persistent homology (PH) groups and their corresponding persistent Betti numbers (PBNs) have long been studied from multiple, equivalent perspectives by several authors, see~\cite{cerri2013betti, chazal2016structure, cohen2005stability, zomorodian2004computing} and references therein for an overview. 
%We recall a few characterizations which are illuminating in this effort.
From an algebraic perspective, Carlsson et al.~\cite{zomorodian2004computing} observed that the PH groups over a filtration may be viewed as the standard homology groups of a particular graded module $M$ over a polynomial ring. They also give a cubic-time algorithm to compute these groups on spaces in arbitrary dimensions over any field. 
%More recently, Bauer studied persistence in a form a matching. 
In~\cite{cohen2005stability}, Cohen-Steiner et al. give a more discrete perspective on PH by defining the persistence diagram in terms of a \emph{multiplicities}: given a tame function $f: \mathcal{X} \to \mathbb{R}$ over a topological space $\mathcal{X}$, its homological critical values $\{ a_i \}_{i=1}^n$, and an interleaved sequence $\{ b_i \}_{i=0}^n$ satisfying $b_{i-1} < a_i < b_i$ for all $1 \leq i \leq n$, the $p$-th persistence diagram $\mathrm{dgm}_p(f) \subset \bar{\mathbb{R}}^2$ of a filtration $K_\bullet$ induced by $f$ is given as: 
\begin{equation}
\mathrm{dgm}_p(K_\bullet) = \{ \, (a_i, a_j) :  \mu_p^{i,j} \neq 0 \, \} \; \cup \; \Delta	
\end{equation}
%the set of points $(a_i,a_j)$ drawn on the plane with non-zero multiplicity $\mu_p^{i,j}$: 
where $\Delta$ denotes the diagonal, counted with infinite multiplicity, and $\mu_p^{i,j}$ is the  \emph{multiplicity function}, defined as: 
\begin{equation}\label{eq:multiplicity}
	\mu_p^{i,j} = \left(\beta_p^{i,j\shortminus1} - \beta_p^{i,j} \right) - \left(\beta_p^{i\shortminus1,j\shortminus1} - \beta_p^{i\shortminus1,j} \right) \quad\quad \text{for } 0 < i < j \leq n+ 1
\end{equation}
For $M$ a decomposable persistence module over $\mathbb{R}$, Chazal~\cite{chazal2016structure} generalize~\eqref{eq:multiplicity} by introducing several alternative notions of `tameness', and show that whenever a persistence diagram is sought, it is enough to construct its corresponding \emph{persistence measure}:
%re-define the multiplicity function by interpreting $\mu_p^\ast$ as a  $\mu_p(R; M)$. means that 
\begin{equation}\label{eq:measure}
	\mu_p(R; M) = \mathrm{card}\left( \,
	%\mathrm{dgm}_p(M)\restriction_R 
	\restr{\mathrm{dgm}_p(M)}{R} \,
	\right) \quad \text{ for all rectangles } R \subset \mathbb{R}^2 
\end{equation}
The measure-theoretic perspective from~\eqref{eq:measure} re-interprets the multiplicity function $\mu^\ast_p$ as an integer-valued measure defined over rectangles in the plane. Since $\mu_p$ is also defined in terms of PBNs, this perspective gives an indirect way of interpreting [combinations of] PBNs in measure-theoretic terms. Indeed, Cerri et al.~\cite{cerri2013betti} incorporate this interpretation in their work studying the stability of PBNs in multidimensional persistence by showing that \emph{proper cornerpoints} in the persistence diagram are points $x = (i,j) \in \Delta_+$ satisfying:
%as limit points of the $\mu_p$, i.e. for every point $x = (i,j) \in \Delta_+$, define the number $\mu_p(x)$ as the minimum over all positive real numbers $\epsilon$ with $i + \epsilon < j - \epsilon$:
\begin{equation}\label{eq:pbn_cont}
	x = (i,j) \in \mathrm{dgm}_p(K_\bullet) \; \Longleftrightarrow \; \mu_p(x) > 0 \; \Longleftrightarrow \; \min_{\epsilon > 0} \left(\beta_p^{i \+ \epsilon, j \shortminus \epsilon} - \beta_p^{i \+ \epsilon, j \+ \epsilon} \right) - \left(\beta_p^{i \shortminus \epsilon, j \shortminus \epsilon} - \beta_p^{i \shortminus \epsilon, j \+ \epsilon} \right) > 0
\end{equation}
One may compare~\eqref{eq:multiplicity} with~\eqref{eq:pbn_cont}. One of the primary contributions from~\cite{cerri2013betti} is a representation theorem expressing the persistent Betti number function as a sum of multiplicity functions. A consequence of this theorem is that any distance between persistence diagrams induces a distance between PBN functions---if $X$ is a triangulable space and $f,g : X \to \mathbb{R}$ are two continuous functions, then $d(\beta_f, \beta_g) \leq \max\limits_{x \in X} \, \lvert f(x) - g(x) \rvert$, where:
\begin{equation*}
	d(\beta_f, \beta_g) = \inf\limits_{\phi} \; \sup\limits_{p \in \mathrm{dgm}(f)} \lVert p - \phi(p) \rVert_{\widetilde{\infty} }
\end{equation*}
is the (extended) matching distance between PBN functions ($\beta_f$, $\beta_g$), $\phi$ ranges over all multi-bijections between $\mathrm{dgm}(f)$ and $\mathrm{dgm}(g)$, and $\lVert \,\cdot \, \rVert_{\widetilde{\infty}}$ measures the pseudo-distance~\cite{cerri2013betti} between points.
Thus, PBN functions are stable functions: small changes in continuous scalar-valued filtering functions imply small changes in the corresponding persistent Betti numbers functions, justifying their use and study in continuously parameterized settings. 

% TODO: move to computation section
%\textbf{Computation:} Despite the stability of the PBNs in parameterized settings, a number of barriers prevent their application in real-world settings. For instance, the main stability theorem from~\cite{cohen2005stability} assumes that the underlying filtering function or persistence module is \emph{tame} and are defined over triangulable spaces. When the number of corner points is finite, the corresponding distance between PBNs reduces to the bottleneck distance from~\cite{cohen2005stability}. 
%By assuming the filtering functions are just continuous (as in equation~\eqref{eq:pbn_cont}), instead of tame, we encounter two problems on the practical side: 1. the number of corner points is countably infinite, and 2. the matching distance between PBN functions $\beta_p(f), \, \beta_p(g)$ requires as input knowledge of the diagrams $\mathrm{dgm}_p(f), \, \mathrm{dgm}_p(g)$ themselves. 
%% Moreover, achieving the infimum in ... requires computing the optimal bijection ... between D(f), D(g), which takes O(...). 
%%one arrives at definitions of PBNs in the flavor of equation~\eqref{pbn_cont}. 




%Construct the persistence measure $\mu$
%we need to know that such a multiset exists and is unique. This is the
%content of Theorem 2.8, under the hypothesis that ÂµV is finite and additive.



%let DgmpVq be a multiset in the half-plane such that (*) holds for all rectangles R.
