 %For any $i,j \in \Delta_+$, define the \emph{multiplicity} $\mu_p^{i,j}$ of the pair $p = (i,j)$ by: 
%\begin{equation}
%	\mu_p^{i,j} = \beta_{p}^{i-1, j} - \beta_{p}^{i, j} + \beta_{p}^{i, j-1}  - \beta_{p}^{i-1, j-1}
%\end{equation}
%The multiplicity function is intimately linked with the persistence diagram. Indeed, the original definition of a persistence 

The connection between the persistent homology (PH) groups and their corresponding persistent Betti numbers (PBNs) has long been studied from multiple perspectives~\cite{cerri2013betti, chazal2016structure, cohen2005stability, zomorodian2004computing}.
%We recall a few characterizations which are illuminating in this effort.
%From an algebraic perspective, Carlsson et al.~\cite{zomorodian2004computing} observed that the PH groups over a filtration may be viewed as the standard homology groups of a particular graded module $M$ over a polynomial ring. 
%They also give a cubic-time algorithm to compute these groups on spaces in arbitrary dimensions over any field. 
%More recently, Bauer studied persistence in a form a matching. 
A discrete perspective was given by Cohen-Steiner et al.~\cite{cohen2005stability}, who studied persistence through the lens of \emph{multiplicities}: given a tame function $f: \mathcal{X} \to \mathbb{R}$ over a topological space $\mathcal{X}$, its homological critical values $\{ a_i \}_{i=1}^n$, and an interleaved sequence $\{ b_i \}_{i=0}^n$ satisfying $b_{i-1} < a_i < b_i$ for all $1 \leq i \leq n$, the $p$-th persistence diagram $\mathrm{dgm}_p(f)$ over $f$ defined by~\cite{cohen2005stability}  is the multiset: 
\begin{equation}\label{eq:dgm}
\mathrm{dgm}_p(f) := \{ \, (a_i, a_j) :  \mu_p^{i,j} \neq 0 \, \} \; \cup \; \Delta	
\end{equation}
%the set of points $(a_i,a_j)$ drawn on the plane with non-zero multiplicity $\mu_p^{i,j}$: 
where $\Delta = \{(x,x): x \in \mathbb{R}, \mu_p^{x,x} = \infty \}$ denotes the diagonal, counted with infinite multiplicity, and $\mu_p^{i,j}$ is the  \emph{multiplicity function}, defined for all $0 \leq i < j \leq n+ 1$ as: 
\begin{equation}\label{eq:multiplicity}
	\mu_p^{i,j} = \left(\beta_p^{i,j\shortminus1} - \beta_p^{i,j} \right) - \left(\beta_p^{i\shortminus1,j\shortminus1} - \beta_p^{i\shortminus1,j} \right)
\end{equation}
The inclusion-exclusion property conveyed by~\eqref{eq:multiplicity} suggests that diagrams completely characterize their PBNs, illuminating an intrinsic connection between diagrams and their Betti numbers. 
Indeed, the fundamental lemma of persistent homology~\cite{edelsbrunner2022computational} states that for every pair of indices $0 \leq k \leq l \leq n+1$: 
\begin{equation}\label{eq:betti_mult}
	\beta_p^{k,l} = \sum\limits_{i \leq k} \sum\limits_{j > l} \mu_p^{i,j}
\end{equation}
% TODO: move to computation section?
The direct consequence of ~\eqref{eq:betti_mult} is that if one is interested in computing any of the PBNs of some space $\mathcal{X}$, then it is sufficient to compute $\mathrm{dgm}_p(\mathcal{X})$ and read them off directly via~\eqref{eq:betti_mult}. Conversely, combinations of Betti numbers recover portions of $\mathrm{dgm}_p(\mathcal{X})$  via~\eqref{eq:dgm} and~\eqref{eq:multiplicity}.

%The focus of this effort inverts this mindset: we focus on recovering \emph{portions} of the diagram by fixing the the index pairs $(i,j)$ ahead of time.

%This fundamental observation inspired the divide-and-conquer PH algorithm given in~\cite{chen2011output}, wherein positional information about the diagram is accessed solely through $\mu$-queries on the unreduced boundary matrix.

% TODO: Intro this section with something like "Chazal showed you don't need decomposability to get the diagram, it's enough to construct a dgm's persistence measure---the "generalized" perspective on constructing diagrams from PBNs. Could even throw in Mobius inversion. Still good end with parameterized setting. 
The duality between diagrams and PBNs becomes more apparent from the measure-theoretic perspective of persistence modules indexed over the real line. 
By reinterpreting the multiplicity function $\mu^\ast_p$ as a kind of integer-valued measure over rectangles in the plane, Chazal~\cite{chazal2016structure} demonstrated one may recover the diagram of a persistence module $M$ over $\mathbb{R}$ by constructing its corresponding \emph{persistence measure}:
%via measure-theoretic tools to prove the existence and stability of persistence diagram. ~\cite{chazal2016structure} 
%re-define the multiplicity function by interpreting $\mu_p^\ast$ as a  $\mu_p(R; M)$. means that 
% After introducing several alternative notions of `tameness',
\begin{equation}\label{eq:measure}
	\mu_p(R; M) = \mathrm{card}\left( \,
	%\mathrm{dgm}_p(M)\restriction_R 
	\restr{\mathrm{dgm}_p(M)}{R} \,
	\right) \quad \text{ for all rectangles } R \subset \mathbb{R}^2 
\end{equation}
% The diagram exists wherever the measure takes finite values. 
Cerri et al.~\cite{cerri2013betti} incorporate this interpretation in studying the stability of PBNs in multidimensional persistence via what they define as \emph{proper cornerpoints}. These are points $x = (\, \hat\imath, \hat\jmath \,) \in \Delta_+$ satisfying $\mu_p(x) > 0$, where:
%\begin{flalign}\label{eq:pbn_cont}
%	(\, \forall x =  (\, \hat\imath, \hat\jmath \,) \in \mathrm{dgm}_p(f) \,)  & & \quad\quad 
%	 \; \Longleftrightarrow \; \mu_p(x) := \; \min_{\delta > 0} \left(\beta_p^{\hat\imath \+ \delta, \hat\jmath  \shortminus \delta} - \beta_p^{\hat\imath \+ \delta, \hat\jmath  \+ \delta} \right) - \left(\beta_p^{\hat\imath \shortminus \delta, \hat\jmath \shortminus \delta} - \beta_p^{\hat\imath \shortminus \delta, \hat\jmath  \+ \delta} \right)
%\end{flalign}
\begin{equation}\label{eq:pbn_cont}
\mu_p(x) := \; \min_{\delta > 0} \left(\beta_p^{\hat\imath \+ \delta, \hat\jmath  \shortminus \delta} - \beta_p^{\hat\imath \+ \delta, \hat\jmath  \+ \delta} \right) - \left(\beta_p^{\hat\imath \shortminus \delta, \hat\jmath \shortminus \delta} - \beta_p^{\hat\imath \shortminus \delta, \hat\jmath  \+ \delta} \right)
\end{equation}
One may compare~\eqref{eq:multiplicity} with~\eqref{eq:pbn_cont}. Towards understanding the stability of the rank invariant in the multidimensional persistence settings, Cerri et al.~\cite{cerri2013betti} use ~\eqref{eq:pbn_cont} to prove a representation theorem akin to~\eqref{eq:betti_mult}, showing that PBNs of a scalar-valued filtering function can be completely described by a persistence diagram. 
%expressing the persistent Betti number function $\beta_\ast : \Delta_+ \to \mathbb{N} \, \cup \, \{\infty\}$ as a sum of multiplicity functions. 
One consequence of this theorem is that distances between diagrams induces distances between PBN functions. Since diagrams are stable, the former conveys stability in the latter: small changes in continuous filtering functions imply small changes in the corresponding persistent Betti numbers functions.  


%measures the pseudo-distance~\cite{cerri2013betti} between points
%---if $X$ is a triangulable space and $f,g : X \to \mathbb{R}$ are two continuous functions, then $d(\beta_f, \beta_g) \leq \max\limits_{x \in X} \, \lvert f(x) - g(x) \rvert$, where:
%\begin{equation*}\label{eq:pbn_stability}
%	d(\beta_f, \beta_g) = \inf\limits_{\phi} \; \sup\limits_{p \in \mathrm{dgm}(f)} \lVert p - \phi(p) \rVert_{\widetilde{\infty} }
%\end{equation*}
%is the (extended) matching distance between PBN functions ($\beta_f$, $\beta_g$), $\phi$ ranges over all multi-bijections between $\mathrm{dgm}(f)$ and $\mathrm{dgm}(g)$, and $\lVert \,\cdot \, \rVert_{\widetilde{\infty}}$ measures the pseudo-distance~\cite{cerri2013betti} between points.
%Thus, PBN functions are stable functions: small changes in continuous scalar-valued filtering functions imply small changes in the corresponding persistent Betti numbers functions. 


% This was the first output-sensitive algorithm. 
%we generalize this In the spirit of~\eqref{eq:measure}, 

%Despite the duality between diagrams and PBNs, most practitioners work directly with former, not the latter. Indeed, though betti numbers have a certain computational advantages and are stable in the sense of~\eqref{eq:pbn_stability}, a number of barriers prevent their use in real-world settings. 
%For instance, the main stability theorem from~\cite{cohen2005stability} assumes that the underlying filtering function or persistence module is \emph{tame} and are defined over a triangulable space. Including this assumption guarantees the number of corner points will be finite and then ~\eqref{eq:pbn_stability} reduces to the bottleneck distance from~\cite{cohen2005stability}. In contrast, relaxing the assumption that such that  $f$ just continuous (as in equation~\eqref{eq:pbn_cont}) implies the number of corner points may be countably infinite, eliminating any hope of recovering the diagram from a finite set of multiplicity computations. 
%Moreover, although the matching distance between PBN functions $\beta_p(f), \, \beta_p(g)$ is appealing from both a theoretical and practical perspective due to its stability, computing the optimal matching distance requires both knowledge of the diagrams $\mathrm{dgm}_p(f), \, \mathrm{dgm}_p(g)$ themselves and the optimal bijections between them. 

%% Moreover, achieving the infimum in ... requires computing the optimal bijection ... between D(f), D(g), which takes O(...). 
%%one arrives at definitions of PBNs in the flavor of equation~\eqref{pbn_cont}. 




%Construct the persistence measure $\mu$
%we need to know that such a multiset exists and is unique. This is the
%content of Theorem 2.8, under the hypothesis that ÂµV is finite and additive.



%let DgmpVq be a multiset in the half-plane such that (*) holds for all rectangles R.
